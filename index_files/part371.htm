<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Controlling I/O Devices</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part370.htm">&lt; Назад</a><span> | </span><a href="../index.html">Содержимое</a><span> | </span><a href="part372.htm">Далее &gt;</a></p><p style="padding-left: 6pt;text-indent: 0pt;text-align: justify;"><a href="#bookmark369" name="bookmark1830">Controlling I/O Devices</a><a name="bookmark1947">&zwnj;</a></p><p style="padding-top: 5pt;padding-left: 6pt;text-indent: 0pt;text-align: justify;"><a href="part183.htm#bookmark1230" class="s23">We saw in </a><a href="part183.htm#bookmark1230" class="s3">Chapter </a><span class="s46">6</span> that a computer uses device controllers to connect I/O devices to it. Each device controller is in charge of and controls a set of devices of a specific type. For example, a disk controller controls disk drives, a tape controller controls tape drives, and a printer controller controls printers. A device controller maintains some local buffer storage and is responsible for moving data between an I/O device that it controls and its local buffer storage. Each device controller also has a few registers that it uses for communicating with the CPU. In some computers, these registers are part of the regular memory address space. This scheme is called <i>memory-mapped I/O</i>. In other computers, the operating system uses a special address space for I/O, and allocates a portion of it to each device controller.</p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: justify;">To perform an I/O operation, the operating system writes the relevant commands and their associated parameters into the appropriate controller&#39;s registers. After loading the commands into the controller&#39;s registers, the CPU resumes with its normal operations. The device controller then examines the contents of these registers and performs necessary actions for the I/O operation. For example, the action for a <i>read </i>request will be to transfer data from the specified input device to its local buffer.</p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: justify;">Once transfer of data from input device to the controller&#39;s local buffer is complete, the operating system uses one of the following two methods to transfer the data from the controller&#39;s local buffer to the appropriate memory area of the computer:</p><p style="padding-top: 9pt;padding-left: 38pt;text-indent: -15pt;text-align: justify;">1. <b>Non-DMA transfer. </b>In this method, as soon as transfer of data from input device to the controller&#39;s local buffer is complete, the controller sends an interrupt signal to the CPU.</p><p style="padding-top: 3pt;padding-left: 39pt;text-indent: 0pt;text-align: justify;">The CPU then stops what it is doing currently, and transfers control of execution to the starting address of the service routine, which handles the interrupt. On execution, the interrupt service routine transfers the data from local buffer of the device controller to main memory. As soon as this data transfer is over, the CPU resumes the job that it was doing before interruption.</p><p style="padding-top: 4pt;padding-left: 38pt;text-indent: -15pt;text-align: justify;"><a name="bookmark1948">2. </a><b>DMA transfer. </b>In non-DMA transfer method, CPU is involved in transfer of data from device controller&#39;s buffer to main memory. That is, the operating system executes the interrupt service routine, which reads one byte or word at a time from the device controller&#39;s buffer and stores it in memory. It is wastage of precious CPU time, if CPU is involved in reading and storing one byte or word at a time. To free the CPU from data transfer operation, many device controllers support <i>direct memory access </i>(DMA) mechanism. In this method, when the operating system prepares for data transfer operation, it writes the relevant commands and their associated parameters into the controller&#39;s registers. The command parameters include the starting memory address (from/to where data transfer is to take place) and the number of bytes in the data. Now after the controller has read the data from the device into its buffer, it copies it from the buffer into main memory (at specified memory address) one byte or word at a time. It does not involve the CPU in this data transfer operation. The device controller sends an interrupt to the CPU only after it completes copying the entire data. Note that in this method, when the operating system starts after the interrupt, it starts performing the subsequent operations directly because there is no need for it to copy the data from the device controller&#39;s buffer to memory (since the data is already there).</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part370.htm">&lt; Назад</a><span> | </span><a href="../index.html">Содержимое</a><span> | </span><a href="part372.htm">Далее &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
